
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="manifest" href="./manifest.json">
        <title>Notebook</title>

        <link rel="icon" type="image/png" href="./Assets/logo.png">

        <style>
			#panelArea {
                position: fixed;
                left: -240px;
                width: 300px;
                height: 100%;
                display: flex;
                flex-direction: column;
				transition: all 0.3s ease-in-out;
                background-color: #8c8c8c;
			}
            #listArea {
                width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                overflow-y: auto;
                scrollbar-width: none;
            }
            #pageArea {
                position: absolute;
                right: 0px;
                top: 0px;
                width: calc(100% - 62px);
                height: 100%;
				border-left: solid #262626 2px;
				transition: all 0.3s ease-in-out;
				overflow-y: auto;
                background-color: #bfbfbf;
            }
			#popupArea {
				width: 300px;
				height: 160px;
				border: solid #262626 2px;
				border-radius: 12px;
				position: fixed;
				top: calc(50% - 80px);
				left: calc(50% - 150px);
				display: none;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				gap: 10px;
				padding: 10px;
				background-color: #8c8c8c;
			}
			#popupArea input {
				width: calc(100% - 30px);
				height: calc(100% - 10px);
				padding: 5px;
				background-color: #e6e6e6;
				border: 0px;
				font-size: 24px;
				border-radius: 12px;
			}
			#popupArea img {
                width: 40px;
                height: 40px;
                min-width: 40px;
                min-height: 40px;
				border: solid white 1px;
                border-radius: 12px;
            }
            .listItem {
                width: calc(100% - 20px);
                height: auto;
                min-height: 40px;
                display: flex;
                align-items: center;
				padding: 10px;
                gap: 10px;
                cursor: pointer;
            }
            .listItem div {
                width: 100%;
                text-align: center;
                font-size: 24px;
                color: black;
            }
            .listItem img {
                width: 30px;
                height: 30px;
				padding: 5px;
                min-width: 30px;
                min-height: 30px;
				border: solid #666666 1px;
                border-radius: 12px;
            }
			.editorButton {
				height: calc(100% - 4px);
				width: auto;
				border: solid #262626 2px;
				border-radius: 8px;
				display: flex;
				justify-content: center;
				align-items: center;
				font-size: 16px;
				color: white;
				cursor: pointer;
				box-shadow: 2px 2px 4px black;
			}
        </style>
		
		<style id="customCSS"></style>
        
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </head>
    <body style="padding:0px; margin:0px; height:100%; background-color:#bfbfbf; overflow: hidden; font-family: Verdana, sans-serif;">
		<div id="panelArea">
			<div id="listArea"></div>
			<div style="width:100%; height:5px; background-color:#262626;"></div>
			<div class="listItem">
				<div></div>
				<img onclick="togglePannel();" src="https://www.clarkeharrison.co.uk/Assets/expand.png"></img>
			</div>
		</div>
        <div id="pageArea"></div>
		<div id="popupArea">
			
		</div>

        <script src="https://clarkeharrison.co.uk/kaplay.js"></script>
        <script src="https://clarkeharrison.co.uk/qrCode.js"></script>

        <script>
            const customCSS = document.querySelector('#customCSS');
            const panelArea = document.querySelector('#panelArea');
            const listArea = document.querySelector('#listArea');
            const pageArea = document.querySelector('#pageArea');
            const popupArea = document.querySelector('#popupArea');

            let notebook = {
			    "Home": {
			        "HTML": [
			            "<h1>Home</h1>"
			        ],
			        "CSS": [
			            ""
			        ],
			        "JS": [
			            ""
			        ],
			        "icon": "https://www.clarkeharrison.co.uk/Assets/home.png"
			    },
			    "Notes": {
			        "HTML": [
			            "<!-- MAIN --> \n\n<div id=\"main\" style=\"width:100%; height:100%; display:flex; flex-direction:column;\">\n    <div contenteditable=\"true\" id=\"noteArea\"></div>\n    <textarea id=\"textEditArea\" style=\"display: none;\"></textarea>\n    <div id=\"toggleEdit\">HTML View</div>\n</div>"
			        ],
			        "CSS": [
			            "#toggleEdit {\n    width: calc(100% - 24px);\n    min-height: 30px;\n    background-color: #666666;\n    margin: 10px;\n    font-size: 24px;\n    display: flex;\n    justify-content: center;\n    align-items: center;    \n    border: solid #333333 2px;\n    box-shadow: 2px 2px 4px #333333;\n    border-radius: 12px;\n    color: white;\n    cursor: pointer;\n}\n\n#noteArea {\n    width: calc(100% - 20px);\n    height: calc(100% - 10px);\n    padding: 10px 10px 0px 10px;\n    overflow-y: auto;\n    scrollbar-width: none;\n}\n\n#textEditArea {\n    width: calc(100% - 20px);\n    height: calc(100% - 20px);\n    padding: 10px;\n    margin: 0px;\n    border: 0px;\n    resize: none;\n}\n\n[contenteditable=\"true\"]:focus {\n    outline: none; /* Removes the black border */\n}\n\nh1 {\n    font-size: 52px;\n}\n\nh2 {\n    font-size: 37px;\n}\n\nh3 {\n    font-size: 22px;\n}\n\n\n\n\ninput[type=\"checkbox\"] {\n  width: 11px;\n  height: 11px;\n  accent-color: #00b33c;\n  cursor: pointer;\n  margin: 0px;\n}\n\ninput[type=\"checkbox\"]:checked + label {\n  text-decoration: line-through;\n  color: #006622;\n}\n\nlabel {\n    cursor: pointer;\n}\n\n\n\n\ntable, th, td {\n    border: 2px solid #333333;\n    border-collapse: collapse;\n    padding: 5px 10px;\n}"
			        ],
			        "JS": [
			            "/* NOTES */\n\nlet htmlMode = true;\n\nconst toggleEdit = document.querySelector('#toggleEdit');\nconst noteArea = document.querySelector('#noteArea');\nconst textEditArea = document.querySelector('#textEditArea');\n\n\n\nnoteArea.innerHTML = notebook[\"Notes\"][\"notes\"];\n\n\n\nnoteArea.addEventListener(\"input\", () => {\n    notebook[\"Notes\"][\"notes\"] = noteArea.innerHTML;\n    saveNotebook();\n});\n\ntextEditArea.addEventListener(\"input\", () => {\n    notebook[\"Notes\"][\"notes\"] = textEditArea.value;\n    saveNotebook();\n});\n\ntextEditArea.addEventListener(\"keydown\", function(e) {\n    if (e.key === \"Tab\") {\n        e.preventDefault();\n        const start = this.selectionStart;\n        const end = this.selectionEnd;\n        this.value = this.value.substring(0, start) + \"    \" + this.value.substring(end);\n        this.selectionStart = this.selectionEnd = start + 4;\n        saveNotebook();\n    }\n});\n\n\n\ntoggleEdit.onclick = function() {\n    if (htmlMode) {\n        textEditArea.value = noteArea.innerHTML;\n    } else {\n        noteArea.innerHTML = textEditArea.value;\n    }\n    noteArea.style.display = (htmlMode) ? \"none\" : \"block\";\n    textEditArea.style.display = (htmlMode) ? \"block\" : \"none\";\n    toggleEdit.innerHTML = `${(htmlMode) ? 'TEXT' : 'HTML'} View`;\n    htmlMode = !htmlMode;\n}\n\n\ndocument.querySelectorAll('label').forEach(label => {\n    label.addEventListener('mousedown', (e) => {\n        e.preventDefault();\n    });\n});"
			        ],
			        "icon": "https://www.clarkeharrison.co.uk/Assets/note.png",
			        "notes": "<h1><center>Notes</center></h1>\n\n<hr>\n\n<h2>Study Planner</h2>\n<input type=\"checkbox\" id=\"myCheckbox\">\n<label for=\"myCheckbox\">Check</label>\n\n<hr>\n<h2>Finance Calculator</h2>\n<table><tbody><tr><th colspan=\"2\"><br>Clarke's Expenditures<br><br></th>\n    </tr>\n    <tr>\n        <th>Phone</th>\n        <td>£40.00</td>\n    </tr>\n    <tr>\n        <th>Car Insurance</th>\n        <td><br></td>\n    </tr>\n    <tr>\n        <th>Car Tax</th>\n        <td><br></td>\n    </tr>\n    <tr>\n        <th>Petrol</th>\n        <td>&nbsp;</td>\n    </tr>\n    <tr>\n        <th>To Joint</th>\n        <td>$1100.00&nbsp;</td>\n    </tr>\n    <tr>\n        <th></th>\n        <td>&nbsp;</td>\n    </tr>\n    <tr>\n        <th></th>\n        <td>&nbsp;</td>\n    </tr>\n    <tr>\n        <th></th>\n        <td>&nbsp;</td>\n    </tr>\n    <tr>\n        <th colspan=\"2\"></th>\n    </tr>\n    <tr>\n        <th>Total</th>\n        <td></td>\n    </tr>\n</tbody></table>\n\n\n"
			    },
			    "Click And Treat Training": {
			        "HTML": [
			            "<!--Header--> \n\n\n<div style=\"height:500px; position:relative; background-color:grey;\">\n    <img style=\"width:160px; height:160px; position:relative; top:30px; left:30px; border-radius:600px;\"></img>\n    <div class=\"fadeUp\">\n        <h1 style=\"color:white;\">Personalised 1-2-1 Dog Training</h1>\n        <p style=\"color:white;\">Building trust, one click at a time!</p>\n    </div>\n</div>\n\n\n<canvas></canvas>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
			            "<!--Summary--> \n \n<div class=\"section wrap\" style=\"background-color:#D9F6FA;\">\n    <img class=\"sub\" style=\"width:100%; height:100%; border-radius:400px;\"></img>\n    <div class=\"sub\">\n        <h2>Meet the trainer behind the treats</h2>\n        <p>Hi, I'm Chloe, and I believe in positive reinforcement training. I am passionate about helping dogs and their owners build lasting, trust based relationships.</p>\n        <p>My training methods are force-free, reward-based, and adapted to suit your dog's personality. Whether you're working on puppy foundations, lead skills, recall, reactivity, confidence building, or muzzle training, I'm here to support you every step of the way.</p>\n        <p>My dog, Zuri, is the reason behind everything I do. She is reactive through fear to certain things, and this inspired me to start training. Through our journey, we built a deeper connection, and I found a love for training dogs. Training not only helped her, it strengthened our relationship, helping us become best friends.</p>\n        <p>I offer 1-2-1 dog training and hope to one day expand my business to include a secure dog field and an indoor training space, providing a safe and enriching experience for every dog. </p>\n        <p>Let's train with love and kindness, because good relationships start with trust. </p>\n        <p>I am a registered dog trainer with the <b>Animal Behaviour & Training Council (ABTC)</b>, with over six years of hands-on experience working with and training dogs through two of the UK's largest animal welfare charities.</p>\n        <p>My qualifications include:\n        <ul>\n            <li><b>Canine Behaviour Professional – Accredited Diploma</b></li>\n            <br>\n            <li><b>Canine Reactive Behaviour – Accredited Advanced Certificate</b></li>\n            <br>\n            <li><b>CPD Certified – Canine Fear Course</b></li>\n            <br>\n            <li><b>Animal First Aid Trained</b></li>\n            <br>\n            <li><b>Currently studying</b>: Level 4 Diploma in Canine Welfare, Training & Behaviour</li>\n            <br>\n            <li><b>Professional Member</b> of the <b>National Institute for Canine Ethics</b></li>\n        </ul>\n        <p>With a strong skill set in both practical hands-on experience and academic learning, I am dedicated to promoting ethical, welfare-focused dog training.</p>\n        <div class=\"wrap\" style=\"gap:10px;\">\n            <img></img>\n            <img></img>\n            <img></img>\n        </div>\n    </div>\n</div>\n\n\n<canvas></canvas>",
			            "<!--About Me--> \n\n<div class=\"section wrap\" style=\"background-color:#F0F0F0;\">\n    <h2 style=\"min-width:100%;\">Why choose Click and Treat Training?</h2>\n    <div class=\"card\">\n        <img style=\"width:100%; border-radius:400px;\"></img>\n        <h3>Qualified</h3>\n        <p>I am very committed to continuing to work through CPD to keep up to date with all the latest methods in the dog training world. I am animal first aid trained, meaning I can assist in situations that may arise that I need to. I am a registered dog trainer with the ABTC  (Animal Behaviour & Training Council). I am a part of the International Institute for Canine Ethics, dedicated to promoting humane, respectful, and scientifically based practices in training. As a member, I am responsible for upholding the highest standards of animal ethics, helping to advocate for responsible ownership, and sharing knowledge to improve the lives of dogs.</p>\n    </div>\n    <div class=\"card\">\n        <img style=\"width:100%; border-radius:400px;\"></img>\n        <h3>Supportive</h3>\n        <p>I know how challenging it can be to have a reactive dog, the frustration, the worry, and at times it can feel embarrassing. I’ve been in your shoes. You might wonder if you’re doing enough for your dog, or if you’re doing the right things. I’m here to offer support and understanding every step of the way!</p>\n    </div>\n    <div class=\"card\">\n        <img style=\"width:100%; border-radius:400px;\"></img>\n        <h3>I Love What I Do</h3>\n        <p>I believe training should be positive, practical, and fun. My passion comes from watching dogs thrive and families grow closer through trust, patience, and consistency.</p>\n        <p>Training should be a fun skill and shouldn't feel like a chore.</p>\n        <p>Let's train together and have a good time while achieving goals.</p>\n        <p>I have learnt so much over the years doing what I do, and would love to put this knowledge to good use and help educate dog owners like you.</p>\n        <p>So what are you waiting for? Contact me today and let's begin.</p>\n    </div>\n</div>\n\n\n<canvas></canvas>",
			            "<div class=\"section wrap\" style=\"background-color:#F7F3B7;\">\n    <div class=\"sub\"></div>\n    <div class=\"sub\"></div>\n</div>\n\n\n<canvas></canvas>",
			            "<div class=\"section wrap\" style=\"background-color:#D9F6FA;\">\n    <div class=\"sub\"></div>\n    <div class=\"sub\"></div>\n</div>\n\n"
			        ],
			        "CSS": [
			            ".section {\n    min-height:200px;\n    width: 90%;\n    padding: 5%;\n    gap: 80px;\n    background-color: grey;\n}\n\n.sub {\n    min-width: 100px;\n    max-width: 500px;\n    min-height: 100px;\n    text-align: center;\n}\n\n.card {\n    width: 100%;\n    max-width:350px;\n    padding: 10px;\n    border:solid black 2px;\n    text-align: center;\n}\n\n\n.wrap {\n    display: flex;\n    flex-wrap: wrap;\n    text-align: center;\n    justify-content: center;\n}\n\n\n\n\n\n\n\n\n\n\n\n.fadeUp {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    transition: all 1s ease-in-out;\n    position: relative;\n    top: 150px;\n    opacity: 0;\n}\n\ncanvas {\n    width: 100%;\n    height: 60px;\n    display: block;\n}\n\nh1, h2, h3, h4, h5 {\n    font-family: \"MyFont1\", sans-serif;\n    text-align: center;\n}\n\n\nh1 {\n    font-size: 64px;\n    margin: 0px;\n}\n\nh2 {\n    font-size: 36px;\n}\n\nh3 {\n    font-size: 28px;\n}\n\np , ul , li {\n    font-family: \"MyFont2\", sans-serif;\n    color: rgb(100,100,100);\n    text-align: left;\n}\n"
			        ],
			        "JS": [
			            "customCSS.innerHTML += `\n    @font-face {\n        font-family: 'MyFont1';\n        src: url('https://clarkent133.github.io/ClickAndTreatTraining/font1.ttf') format('truetype');\n        font-weight: normal;\n        font-style: normal;\n        font-display: swap;\n    }\n    @font-face {\n        font-family: 'MyFont2';\n        src: url('https://clarkent133.github.io/ClickAndTreatTraining/font2.ttf') format('truetype');\n        font-weight: normal;\n        font-style: normal;\n        font-display: swap;\n    }\n\n\n`;\n\nconst backgroundColours = [\n    \"grey\",\n    \"#D9F6FA\",\n    \"#F0F0F0\",\n    \"#F7F3B7\",\n    \"#D9F6FA\",\n    \"grey\"\n]\n\ndocument.querySelectorAll(\"canvas\").forEach((cnv, index) => {\n    const ctx = cnv.getContext(\"2d\");\n    cnv.width = 1000;\n    cnv.height = 500;\n\n    ctx.fillStyle = backgroundColours[index];\n    ctx.fillRect(0, 0, cnv.width, cnv.height);\n\n    ctx.beginPath();\n    ctx.arc(500, 500, 500, 0, Math.PI * 2, false);\n    ctx.fillStyle = backgroundColours[index + 1];\n    ctx.fill();\n\n\n})\n\ndocument.querySelectorAll(\"#pageArea img\").forEach((elem, index) => {\n    elem.src = \"https://clarkent133.github.io/ClickAndTreatTraining/paw.png\";\n});\n\nrequestAnimationFrame(() => {\n    document.querySelectorAll(\".fadeUp\").forEach((elem, index) => {\n        elem.style.top = \"70px\";\n        elem.style.opacity = 1;\n    })\n});"
			        ],
			        "icon": "https://www.clarkeharrison.co.uk/Assets/code.png"
			    },
			    "Kaplay Test": {
			        "HTML": [
			            "<canvas id=\"kp\" style=\"width:100%; height:100%;\"></canvas>"
			        ],
			        "CSS": [
			            ""
			        ],
			        "JS": [
			            "/* KAPLAY */\n\n//panelArea.remove();\n//pageArea.remove();\n\nconst k = kaplay({\n    width: 720,\n    height:480,\n    letterbox: true,\n    background: [ 0, 0, 0 ],\n    debugKey: \"p\",\n    global: false,\n    canvas: document.querySelector(\"#kp\"),\n    font: \"monospace\"\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
			            "/* ASSET LOADING */\n\n\n\nk.loadSprite('ss', 'https://clarkeharrison.co.uk/Assets/ss.png', {\n    sliceX: 49,\n    sliceY: 22,\n    anims: {\n\n    }\n});\n\n\n\nk.loadBean();",
			            "/* MAIN SCENE */\n\n\n\nk.scene(\"main\", () => {\n\n    const p = k.add([\n        k.sprite(\"ss\", {\n            frame: 1\n        }),\n        k.pos(20, 20)\n    ]);\n\n\n\n    k.add([\n        k.sprite(\"bean\"),\n        k.pos(60, 60)\n    ]);\n\n})\n\nk.go(\"main\");"
			        ],
			        "icon": "https://www.clarkeharrison.co.uk/Assets/code.png"
			    },
			    "RPG Cards": {
			        "HTML": [
			            "<h1><u>Rules</u></h1>\n<h2><u>What You Need</u></h2>\nEach player needs two six-sided dice, a standard deck of playing cards, and either the companion app or a printable event reference. Damage Counters can be tracked with any tokens or markers.\n<h2><u>Setup</u></h2>\nRemove all Aces through 5s from the deck and separate them by suit. Each player chooses one suit, places the Ace face-up as their Character Card, the area this resides in is your Field. Keep cards 2–5 in hand as Support Cards. Any unused suits are removed from the game. Shuffle the remaining 6–King cards to form the World Deck, where number cards (6–10) are Challenges and face cards (J, Q, K) are Events. Reveal the top three World cards face-up in the center. Begin the adventure in the app and choose who goes first.\n<h2><u>Taking a Turn</u></h2>\nOn your turn you must choose one of the three revealed World cards and do the following:\n<ul>\n    <li>Challenge Card : Roll 2d6 and add +1 for each card in your field that matches the Challenge’s suit. If the total is equal to or greater than the Challenge value you succeed and move the card into your field; if it is lower, you fail, gain one Damage Counter, and discard the card.</li>\n    <br>\n    <li>Event Card : Consult the app or reference sheet, follow its instructions, then discard it. Some Events require a roll such as “2d6 + ♣” or similar. For these perform a Challenge as normal of that suit, but instead of beating a target number, the total is compared to an outcome table shown in the Event.</li>\n</ul>\nAfter resolving the chosen card, reveal a new World card so three are always available. Your turn ends and the next player clockwise begins their turn.\n<h2><u>Supporting Other Players</u></h2>\nBefore the active player rolls for a Challenge, one other player may support them if both agree. The supporting player chooses one of their Support Cards, rolls 1d6, and must roll equal to or higher than the card’s value. On success, the card's value is added to the Challenge roll; on failure, the supporting player gains one Damage. The used Support Card's are then turned face-down and cannot be used again until a \"Rest\" occurs, which is triggered by certain Events.\n<h2><u>Damage, Elimination & Victory</u></h2>\nWhen you gain Damage, place that many Damage Counters onto your Character Card, when it has eight or more, you are out of the game. There is no fixed victory condition; specific Event cards introduce the objective, so the way to win depends entirely on the order in which Events appear.\n<br><br><br><br>\n<h1><u>Card Generator</u></h1>\n<h2>Click to Progress</h2>\n<div id=\"qrcode\" style=\"display:none;\"></div>\n<canvas id=\"cnv\" width=\"250\" height=\"350\" style=\"width:250px; height:350px;\"></canvas>\n<br><br><br><br>\n<button onclick=\"downloadCards();\" style=\"height:auto; width:auto; padding:20px;\">Download All</button>\n<br><br><br><br>"
			        ],
			        "CSS": [
			            ""
			        ],
			        "JS": [
			            "const cnv = document.getElementById(\"cnv\");\nconst ctx = cnv.getContext(\"2d\");\n\n\n\nconst qrCodes = [\"a8@F\",\"K#2p\",\"mZ9!\",\"4g$B\",\"Qw7%\",\"x&L3\",\"R1*t\",\"sE@5\",\"N^6y\",\"c!P8\",\"T0#h\",\"u$K2\",\"V&9z\",\"b3@J\",\"Y*4q\",\"d!M7\",\"G5^x\",\"p#F1\",\"H&8v\",\"j$R6\",\"Z2!n\",\"k@C9\",\"L0#s\",\"w^T3\",\"f&8B\",\"P$6e\",\"o1!Y\",\"X#4m\",\"i^N7\",\"S2@u\",\"e$Q5\",\"U&9h\",\"3b!K\",\"A#6t\",\"g^P8\",\"D0$y\",\"r&4W\",\"J1@c\",\"h!Z9\",\"M#3l\",\"2v^S\",\"E$7o\",\"q&5X\",\"F@8d\",\"6n!G\",\"C#1p\",\"t^4V\",\"B$9r\",\"5L&j\",\"O!2f\",\"7k#H\",\"I^0a\",\"9s$D\",\"l&3U\"];\nconst pc = [\"A♣\",\"2♣\",\"3♣\",\"4♣\",\"5♣\",\"6♣\",\"7♣\",\"8♣\",\"9♣\",\"10♣\",\"J♣\",\"Q♣\",\"K♣\",\"A♥\",\"2♥\",\"3♥\",\"4♥\",\"5♥\",\"6♥\",\"7♥\",\"8♥\",\"9♥\",\"10♥\",\"J♥\",\"Q♥\",\"K♥\",\"A♠\",\"2♠\",\"3♠\",\"4♠\",\"5♠\",\"6♠\",\"7♠\",\"8♠\",\"9♠\",\"10♠\",\"J♠\",\"Q♠\",\"K♠\",\"A♦\",\"2♦\",\"3♦\",\"4♦\",\"5♦\",\"6♦\",\"7♦\",\"8♦\",\"9♦\",\"10♦\",\"J♦\",\"Q♦\",\"K♦\",\"Jo\",\"Jo\"];\nconst COLOURS = ['#ffff00', '#33cc33', '#cc3300', '#0066cc', '#660066', '#ff66ff'];\nconst OFFSET_PAIRS = [\n  [1,2], [1,3], [1,4],\n  [2,1], [2,3], [2,5],\n  [3,1], [3,2], [3,4],\n];\n\nconst DECK = [];\nlet cardID = 1;\nOFFSET_PAIRS.forEach((pair, blockIdx) => {\n    const [a, b] = pair;\n    const bottomPos = blockIdx % 3; // 0,1,2 repeated -> perfect per-colour front position balance\n    for (let c = 0; c < 6; c++) {\n        const bottom = [\n            COLOURS[(c) % 6],\n            COLOURS[(c + a) % 6],\n            COLOURS[(c + a + b) % 6],\n        ];\n        DECK.push({\n            bottom,\n            top: bottom[bottomPos], // top is one of the 3 on its own bottom\n            bottomPos,              // 0 = left, 1 = middle, 2 = right\n        });\n    }\n});\n\n\nfor (let i = DECK.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [DECK[i], DECK[j]] = [DECK[j], DECK[i]]; // swap\n}\n\nfor (let i=0; i<DECK.length; i++) {\n    DECK[i][\"pc\"] = pc[i];\n    DECK[i][\"qr\"] = qrCodes[i];\n}\n\n\n\n\n\n\n\n\n\n\n\nlet count = 0;\ncnv.addEventListener('mousedown', (e) => {\n    count += 1;\n    drawCard(count);\n});\ndrawCard();\n\n\n\n\n\nfunction drawCard(i=0) {\n    const card = DECK[i];\n    ctx.fillStyle = \"black\";\n    ctx.fillRect(0,0,cnv.width,cnv.height);\n\n    drawCircle(20,20,15,card.top);\n    drawCircle(230,20,15,card.top);\n    ctx.fillStyle = card.top;\n    ctx.fillRect(20,5,210,140);\n    ctx.fillRect(5,20,240,125);\n\n    ctx.fillStyle = card.bottom[0];\n    ctx.fillRect(5,145,35,185);\n    ctx.fillRect(20,145,20,200);\n    ctx.fillStyle = card.bottom[1];\n    ctx.fillRect(40,145,170,200);\n    ctx.fillStyle = card.bottom[2];\n    ctx.fillRect(210,145,35,185);\n    ctx.fillRect(210,145,20,200);\n\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(75,250,100,100);\n    ctx.fillRect(0,290,250,60);\n\n    ctx.fillStyle = \"#D3D3D3\";\n    ctx.fillRect(5,295,70,35);\n    ctx.fillRect(20,295,55,50);\n    ctx.fillRect(80,255,90,90);\n    ctx.fillRect(175,295,70,35);\n    ctx.fillRect(175,295,55,50);\n\n    drawCircle(20,330,15,\"#D3D3D3\");\n    drawCircle(230,330,15,\"#D3D3D3\");\n\n    drawText(5,295,75,56,`${i + 1}`);\n    drawText(171,295,75,54,card.pc);\n\n    drawShape([ [125,240],[175,240],[185,250],[185,260],[195,270],[225,270],[235,260],[235,25],[225,15],[25,15],[15,25],[15,260],[25,270],[55,270],[65,260],[65,250],[75,240],[125,240] ] , {fill:\"#FFFFFF\"});\n\n    const qrCode = new QRCode(\"qrcode\", {\n        text: card.qr,\n        width: 80,\n        height: 80,\n        colorDark : \"#000000\",\n        colorLight : \"#D3D3D3\",\n        correctLevel : QRCode.CorrectLevel.H\n    });\n\n    ctx.drawImage(qrCode._oDrawing._elCanvas, 85, 260, 80, 80);\n}\n\n\n\n\n\n\n\n\n\n\nfunction drawShape(points, { lineWidth = 5, stroke = '#000', fill = \"\" } = {}) {\n    ctx.beginPath();\n    ctx.moveTo(points[0][0], points[0][1]);\n    for (let i = 1; i < points.length; i++) ctx.lineTo(points[i][0], points[i][1]);\n    ctx.closePath();\n    ctx.lineWidth = lineWidth;\n    ctx.strokeStyle = stroke;\n    ctx.fillStyle = fill;\n    ctx.lineJoin = 'round';\n    ctx.lineCap = 'round';\n    if (fill != \"\") ctx.fill();\n    ctx.stroke();\n}\n\n\nfunction drawCircle(x, y, r, colour, startAngle = 0, endAngle = 360) {\n    ctx.beginPath();\n    ctx.arc(x, y, r, startAngle*(Math.PI / 180), endAngle*(Math.PI / 180));\n    ctx.fillStyle = colour;\n    ctx.fill();\n}\n\n\n\nfunction drawText(x,y,w,h,t,font=\"36px sans-serif\"){\n    ctx.fillStyle=\"#000000\"; ctx.save(); ctx.font=font; ctx.textAlign=\"center\"; ctx.textBaseline=\"alphabetic\";\n  const m=ctx.measureText(\"Mg\"), a=m.actualBoundingBoxAscent||0, d=m.actualBoundingBoxDescent||0,\n        fs=parseFloat(/(\\d+(?:\\.\\d+)?)px/.exec(ctx.font)?.[1]||16),\n        lh=a+d||fs*1.2, asc=a||fs*.8, cx=x+w/2;\n  const wrap=s=>{\n    const L=[], mw=w;\n    for(const p of s.split(/\\r?\\n/)){ let l=\"\";\n      for(const w2 of p.split(/\\s+/)){\n        if(ctx.measureText(w2).width>mw){\n          if(l) L.push(l),l=\"\";\n          let c=\"\"; for(const ch of w2){\n            const t2=c+ch; ctx.measureText(t2).width<=mw?c=t2:(L.push(c),c=ch);\n          } l=c; continue;\n        }\n        const t2=l?l+\" \"+w2:w2;\n        ctx.measureText(t2).width<=mw?l=t2:(L.push(l),l=w2);\n      }\n      L.push(l);\n    } return L;\n  };\n  const lines=wrap(t), bh=lines.length*lh, sy=y+(h-bh)/2+asc;\n  ctx.beginPath(); ctx.rect(x,y,w,h); ctx.clip();\n  lines.forEach((l,i)=>ctx.fillText(l,cx,sy+i*lh));\n  ctx.restore();\n}\n\n\n\nwindow.downloadCards = function() {\n    const tempCnv = document.createElement(\"canvas\");\n    const tempCtx = tempCnv.getContext(\"2d\");\n    const cardWidth = 250;\n    const cardHeight = 350;\n    tempCnv.width = cardWidth * 4;\n    tempCnv.height = cardHeight * 14;\n    for (let i=0; i<54; i++) {\n        drawCard(i);\n        tempCtx.drawImage(cnv, Math.floor(i%4)*250, Math.floor(i/4)*350);\n    }\n    drawCard(0);\n    const link = document.createElement('a');\n    link.download = 'cards.png';\n    link.href = tempCnv.toDataURL('image/png');\n    link.click();\n}\n\n\n\n"
			        ],
			        "icon": "https://www.clarkeharrison.co.uk/Assets/code.png"
			    },
			    "Run Custom JS": {
			        "HTML": [
			            "<div class=\"outer flex\">\n    <div class=\"inner flex\">\n        <input id=\"jsInp\" type=\"text\" placeholder=\"Enter JS Here ...\"></input>\n        <button id=\"jsRun\">RUN</button>\n    </div>\n</div>"
			        ],
			        "CSS": [
			            ".outer {\n    width: 100%;\n    height: 100%;\n}\n\n\n\n.inner {\n    border: solid #333333 4px;\n    border-radius: 8px;\n    padding: 10px;\n    background-color: #666666;\n    box-shadow: 2px 2px 4px #333333;\n}\n\n.inner * {\n    padding: 5px 10px;\n    font-size: 18px;\n    border-radius: 8px;\n    border: solid #333333 4px;\n    box-shadow: 1px 1px 2px #333333;\n}\n\n\n\n.flex {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    gap: 10px;\n}\n\nbutton {\n    cursor: pointer;\n}\n\nbutton:active {\n    box-shadow: none;\n}"
			        ],
			        "JS": [
			            "document.querySelector('#jsRun').onclick = function() {\n    new Function(document.querySelector('#jsInp').value)();\n}"
			        ],
			        "icon": "https://www.clarkeharrison.co.uk/Assets/code.png"
			    }
			};


            function createHTMLElement(type, inner, css, id="", classList="", parent, onClick=function() {}) {
                const temp = document.createElement(type);
                temp.innerHTML = inner;
                if (css != "") temp.style.cssText = css;
                if (id != "") temp.id = id;
                if (classList != "") temp.classList.add(classList);
                temp.onclick = onClick;
                parent.appendChild(temp);
                return temp;
            }
			
			
            
            function populateListArea() {
                listArea.innerHTML = "";
                for (const pageName in notebook) {
                    const listItem = createHTMLElement("div", "", "", "", "listItem", listArea);
					const EditPic = createHTMLElement("img", "", "", "", "", listItem, function() {
						editPageContents(pageName, pageArea);
					});
					EditPic.src = "https://www.clarkeharrison.co.uk/Assets/edit.png";
                    const itemText = createHTMLElement("div", pageName, "", "", "", listItem, function() {
						runPage(pageName, pageArea);
					});
                    const itemPic = createHTMLElement("img", "", "", "", "", listItem, function() {
						runPage(pageName, pageArea);
					});
					itemPic.src = notebook[pageName].icon;
                    const lineBreak = createHTMLElement("div", "", "width:calc(100% - 20px); height:1px; background-color:#262626; margin-left:10px;", "", "", listArea);
                };
				const newItem = createHTMLElement("div", "", "", "", "listItem", listArea, function() {
					editPageName();
				});
				const itemText = createHTMLElement("div", "Create Page", "", "", "", newItem);
				const itemPic = createHTMLElement("img", "", "", "", "", newItem);
				itemPic.src = "https://www.clarkeharrison.co.uk/Assets/plus.png";
            }
            
			
			
			function togglePannel() {
				pageArea.style.width = (panelArea.style.left == "0px") ? "calc(100% - 62px)" : "calc(100% - 302px)";
				panelArea.style.left = (panelArea.style.left == "0px") ? "-240px" : "0px";
			}
            
			
			
            function runPage(pageName, targetDiv) {
                targetDiv.style.opacity = 0;
                setTimeout(() => {
                    targetDiv.innerHTML = notebook[pageName]["HTML"].join("\n");
                    customCSS.innerHTML = notebook[pageName]["CSS"].join("\n");
                    new Function(notebook[pageName]["JS"].join("\n"))();
                    requestAnimationFrame(() => {targetDiv.style.opacity = 1;})
                }, 300);
            }
			
			
			
			function editPageName(pageName="") {
				popupArea.style.display = "flex";
				popupArea.innerHTML = "";

				let iconImg = "https://www.clarkeharrison.co.uk/Assets/code.png";
				
				const nameIconArea = createHTMLElement("div", "", "display:flex; gap:10px; height:40px;", "", "", popupArea);
				const nameInput = createHTMLElement("input", "", "", "", "", nameIconArea);
				nameInput.placeholder = "Page Name ...";
				nameInput.type = "text";
				if (pageName != "") nameInput.value = pageName;
				const iconArea = createHTMLElement("img", "", "cursor:pointer;", "", "", nameIconArea, function() {
					iconImg = prompt("Please enter the URL of the image you want to use for the Icon.");
					iconArea.src = iconImg;
				});
				iconArea.src = iconImg;
				
				const buttonsArea = createHTMLElement("div", "", "display:flex; justify-content:space-around; height:40px; width:100%;", "", "", popupArea);
				if (pageName != "") {
					const deleteButton = createHTMLElement("div", "Delete", "padding:0px 20px;", "", "editorButton", buttonsArea, function() {
						if (prompt("Are you sure that you want to delete this page?\n\nEnter YES to confirm.") == "YES") {
							delete notebook[pageName];
							saveNotebook();
						}
						populateListArea();
						popupArea.style.display = "none";
					});
				}
				const saveButton = createHTMLElement("div", "Save", "padding:0px 20px;", "", "editorButton", buttonsArea, function() {
					if (nameInput.value == "") return alert("You must enter a valid name for the page.");
					if (nameInput.value in notebook) {
						if (prompt("A page with that name already exists, do you want to overwrite it with this?\n\nEnter YES to confirm.") != "YES") return;
					}
					let saving = {"HTML":[""],"CSS":[""],"JS":[""]};
					if (pageName != "") {
						saving = JSON.parse(JSON.stringify(notebook[pageName]));
						delete notebook[pageName];
					}
					saving.icon = iconImg;
					notebook[nameInput.value] = saving;
					saveNotebook();
					populateListArea();
					popupArea.style.display = "none";
				});
			}
			
			
            
            function editPageContents(pageName, targetDiv, typeValue="HTML", subTextValue=0) {
				targetDiv.innerHTML = "";
				
				function saveTxt() {
					if (txtArea.value != "") notebook[pageName][typeValue][subTextValue] = txtArea.value;
					saveNotebook();
				}
				const mainEditArea = createHTMLElement("div", "", "width:100%; height:100%; display:flex; flex-direction:column;", "", "", targetDiv);
				
				const editTypeArea = createHTMLElement("div", "", "display:flex; height:30px; gap:10px; background-color:#666666; padding:5px; flex: 0 0 auto; justify-content:space-around;", "", "", mainEditArea);
				createHTMLElement("div", "HTML", `width:100%; ${(typeValue == "HTML") ? "background-color:#e6e6e6; color:black;" : ""}`, "", "editorButton", editTypeArea, function() {saveTxt(); editPageContents(pageName, targetDiv, "HTML");});
				createHTMLElement("div", "CSS", `width:100%; ${(typeValue == "CSS") ? "background-color:#e6e6e6; color:black;" : ""}`, "", "editorButton", editTypeArea, function() {saveTxt(); editPageContents(pageName, targetDiv, "CSS");});
				createHTMLElement("div", "JS", `width:100%; ${(typeValue == "JS") ? "background-color:#e6e6e6; color:black;" : ""}`, "", "editorButton", editTypeArea, function() {saveTxt(); editPageContents(pageName, targetDiv, "JS");});
				
				const editSubTextArea = createHTMLElement("div", "", "display:flex; height:30px; gap:10px; background-color:#666666; padding:5px; flex: 0 0 auto; overflow-x:auto; scrollbar-width:none;", "", "", mainEditArea);
				for (let i=0; i<notebook[pageName][typeValue].length; i++) {
					const firstLine = notebook[pageName][typeValue][i].split("\n")[0];
					createHTMLElement("div", (firstLine.startsWith("/*") || firstLine.startsWith("<!")) ? firstLine.slice(2,-2) : `${i}`, `padding: 0px 20px; flex: 0 0 auto; ${(i == subTextValue) ? "background-color:#e6e6e6; color:black;" : ""}`, "", "editorButton", editSubTextArea, function() {
						if (txtArea.value == "" && subTextValue != 0) {
							notebook[pageName][typeValue].splice(subTextValue, 1);
							if (i >= subTextValue) i -= 1;
						}
						saveTxt();
						editPageContents(pageName, targetDiv, typeValue, i);
					});
				}
				createHTMLElement("div", `+`, "padding: 0px 20px;", "", "editorButton", editSubTextArea, function() {saveTxt(); notebook[pageName][typeValue].push(""); editPageContents(pageName, targetDiv, typeValue, notebook[pageName][typeValue].length-1);});
				
				const txtEditArea = createHTMLElement("div", "", "display:flex; height:100%; background-color:#333333; padding:5px;", "", "", mainEditArea);
				const txtArea = createHTMLElement("textarea", "", "width:calc(100% - 10px); height:calc(100% - 10px); padding:5px; border:0px; background-color:rgba(0,0,0,0); color:white; resize:none; white-space:pre; overflow-wrap:normal; scrollbar-color:white #333333;", "", "", txtEditArea);
				txtArea.addEventListener("input", saveTxt);
				txtArea.addEventListener("keydown", function(e) {
					if (e.key === "Tab") {
						e.preventDefault();
						const start = this.selectionStart;
						const end = this.selectionEnd;
						this.value = this.value.substring(0, start) + "    " + this.value.substring(end);
						this.selectionStart = this.selectionEnd = start + 4;
						saveTxt();
					}  
				});
				
				const dividerArea = createHTMLElement("div", "", "display:flex; height:30px; gap:10px; background-color:#666666; padding:5px; flex: 0 0 auto; justify-content:space-around;", "", "", mainEditArea);
				createHTMLElement("div", "Reset", "width:100%;", "", "editorButton", dividerArea, function() {
					if (prompt('Are you sure you want to reset all changes?\n\nEnter YES to confirm.') == 'YES') {
						indexedDB.deleteDatabase('notebookDB');
						window.location.reload();
					}
				});
				createHTMLElement("div", "Export", "width:100%;", "", "editorButton", dividerArea, function() {
					navigator.clipboard.writeText("let notebook = " + JSON.stringify(notebook, null, 4) + ";");
					alert("Saved to Clipboard !");
				});
				const previewButton = createHTMLElement("div", "Preview", "width:100%;", "", "editorButton", dividerArea, function() {
					previewArea.style.height = "200%";
					runPage(pageName, previewArea);
					
					createHTMLElement("div", "Update", "width:100%;", "", "editorButton", dividerArea, function() {
						runPage(pageName, previewArea);
					});
					
					previewButton.innerHTML = "Close";
					previewButton.onclick = function() {
						previewArea.style.height = "0px";
						setTimeout(() => {
							customCSS.innerHTML = "";
							editPageContents(pageName, targetDiv, typeValue, subTextValue)
						}, 300)
					}
				});
				
				const previewArea = createHTMLElement("div", "", "height:0px; overflow-y:auto; scrollbar-width:none; transition:all 0.3s ease-in-out;", "", "", mainEditArea);
				
				txtArea.value = notebook[pageName][typeValue][subTextValue];
            }

            async function saveNotebook(save = true) {
                const db = await new Promise((res, rej) => {
                    const r = indexedDB.open("notebookDB", 1);
                    r.onupgradeneeded = () => r.result.createObjectStore("notebookDB");
                    r.onsuccess = () => res(r.result);
                    r.onerror = () => rej(r.error);
                });

                const tx = db.transaction("notebookDB", "readwrite");
                const store = tx.objectStore("notebookDB");
                const key = "notebook";

                return new Promise((res, rej) => {
                    const req = save ? store.put(notebook, key) : store.get(key);
                    req.onsuccess = () => {
                        if (!save) {
                            if (req.result) notebook = req.result;
                            populateListArea();
							runPage("Home", pageArea);
                        }
                        res(req.result);
                    };
                    req.onerror = () => rej(req.error);
                });
            }

            saveNotebook(false);

        </script>
		
		<script>
            if ("serviceWorker" in navigator) {
                navigator.serviceWorker.register("/service-worker.js");
            }
        </script>
    </body>
</html>










